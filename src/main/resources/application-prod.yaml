# ============================================================
# 운영 환경 설정 (production)
# 실행: -Dspring.profiles.active=prod
# 모든 민감 정보는 환경변수로 주입 (절대 하드코딩 금지)
# ============================================================

spring:
  # ── DataSource (PostgreSQL 운영) ──────────────────────────
  datasource:
    url: jdbc:postgresql://${DB_HOST}:${DB_PORT:5432}/${DB_NAME}
    driver-class-name: org.postgresql.Driver
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}

    # ── HikariCP 커넥션 풀 ──────────────────────────────────
    hikari:
      maximum-pool-size: 10       # 최대 커넥션 수 (서버 스펙에 따라 조정)
      minimum-idle: 5             # 유휴 상태 최소 커넥션 수
      connection-timeout: 30000   # 커넥션 획득 대기 시간 (30초)
      idle-timeout: 600000        # 유휴 커넥션 유지 시간 (10분)
      max-lifetime: 1800000       # 커넥션 최대 수명 (30분, DB wait_timeout보다 짧게)

  # ── JPA / Hibernate ──────────────────────────────────────
  jpa:
    hibernate:
      ddl-auto: none  # 운영 DB 스키마 자동 변경 금지 (Flyway/Liquibase 등 마이그레이션 툴 사용 권장)
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        # show_sql, format_sql 비활성화 - 운영 환경 성능 및 보안
